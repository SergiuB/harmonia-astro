---
import "keen-slider/keen-slider.min.css";
import { Image, getImage } from "astro:assets";
import { useTranslations } from "../i18n/utils";
import RootLayout from "../layouts/RootLayout.astro";
import ContactSection from "../components/ContactSection.astro";

interface Props {
  lang: "ro" | "en";
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const pageTitle = "RESPIRO Urban Holistic Retreat";
import heroImage from "/src/assets/new-design/portrait_retreat.jpg";
import heroDesktopImage from "/src/assets/new-design/landscape_retreat.jpg";
const optimizedHeroImage = await getImage({
  src: heroImage,
  width: 1600,
  quality: 95,
});
const optimizedHeroDesktopImage = await getImage({
  src: heroDesktopImage,
  width: 1920,
  quality: 95,
});

import carousel0 from "/src/assets/respiro/carusel/Respiro_096.jpg";
import carousel1 from "/src/assets/respiro/carusel/Respiro_051.jpg";
import carousel2 from "/src/assets/respiro/carusel/Respiro_070.jpg";
import carousel3 from "/src/assets/respiro/carusel/Respiro_108.jpg";
import carousel4 from "/src/assets/respiro/carusel/Respiro_159.jpg";
import carousel5 from "/src/assets/respiro/carusel/Respiro_185.jpg";
import carousel6 from "/src/assets/respiro/carusel/Respiro_203.jpg";
import carousel7 from "/src/assets/respiro/carusel/Respiro_216.jpg";
import carousel8 from "/src/assets/respiro/carusel/Respiro_238.jpg";
import carousel9 from "/src/assets/respiro/carusel/Respiro_261.jpg";

const images = [
  carousel0,
  carousel1,
  carousel2,
  carousel3,
  carousel4,
  carousel5,
  carousel6,
  carousel7,
  carousel8,
  carousel9,
];

const participantCategories = [
  "respiro.categoryIndividuals",
  "respiro.categoryCouples",
  "respiro.categoryFriends",
  "respiro.categoryFamilies",
  "respiro.categoryBusiness",
  "respiro.categoryCorporations",
] as const;

const availableEditions = [
  {
    name: "respiro.edition1Name",
    date: "respiro.edition1Date",
    time: "respiro.edition1Time",
    status: "respiro.edition1Status",
  },
  {
    name: "respiro.edition2Name",
    date: "respiro.edition2Date",
    time: "respiro.edition2Time",
    status: "respiro.edition2Status",
  },
] as const;
---

<RootLayout title={pageTitle} lang={lang}>
  <section
    class="relative hero-section h-[calc(100vh-7rem)] flex flex-col items-center justify-center text-center bg-cover bg-center lg:hidden"
    style={`background-image: url('${optimizedHeroImage.src}')`}
  >
  </section>
  <section
    class="relative hero-section h-[calc(100vh-7rem)] flex flex-col items-center justify-center text-center bg-cover bg-center max-lg:hidden"
    style={`background-image: url('${optimizedHeroDesktopImage.src}')`}
  >
  </section>
  <section
    class="flex flex-col items-center justify-center bg-light text-primary text-left"
  >
    <p class="px-4 py-4 max-w-lg">
      {t("respiro.introParagraph1")}
    </p>
    <p class="px-4 max-w-lg">
      {t("respiro.introParagraph2a")}
      <strong class="font-semibold">{t("respiro.participantsHighlight")}</strong
      >
      {t("respiro.introParagraph2b")}
    </p>

    <div id="carousel" class="keen-slider my-4 max-w-lg">
      {
        images.map((image) => (
          <div class="keen-slider__slide ">
            <Image
              class="rounded-2xl object-cover w-full h-96"
              src={image}
              alt={image.src}
            />
          </div>
        ))
      }
    </div>

    <div class="w-full p-4 max-w-lg">
      <h2 class="text-3xl mb-4">{t("respiro.forWhoTitle")}</h2>
      <p>{t("respiro.forWhoDescription")}</p>
      <div>
        <p class="my-4 font-semibold text-lg">{t("respiro.categoriesTitle")}</p>
        <ul class="ml-5 list-disc space-y-1">
          {participantCategories.map((key) => <li>{t(key)}</li>)}
        </ul>
      </div>
      <div>
        <p class="my-4 font-semibold text-lg">{t("respiro.editionsTitle")}</p>
        <ul class="ml-5 list-disc space-y-2">
          {availableEditions.map((edition) => (
            <li class="font-medium">
              <span class="block">{t(edition.name)}</span>
              <span class="block text-sm text-primary/80">
                <span class="inline-block min-w-[8rem]">
                  {t(edition.date)}
                </span>
                <span class="inline-block min-w-[7rem] text-center">
                  {t(edition.time)}
                </span>
                <span class="inline-block min-w-[10rem] text-right">
                  {t(edition.status)}
                </span>
              </span>
            </li>
          ))}
        </ul>
      </div>
      <div class="flex flex-col items-center justify-center gap-3 mt-6">
        <a
          class="px-4 py-4 mt-4 text-primary rounded-full border-2 border-primary text-center"
          href="/respiro.pdf"
          download
        >
          {t("respiro.ctaDownload")}
        </a>
        <a
          class="bg-primary rounded-full px-11 py-4 text-light uppercase text-center"
          href="https://wa.link/l1f0gf"
          target="_blank"
          rel="noopener noreferrer"
        >
          {t("respiro.ctaContact")}
        </a>
      </div>
    </div>

    <div class="w-full p-4 max-w-lg">
      <p>
        {t("respiro.conclusion1")}
      </p>
      <p>
        {t("respiro.conclusion2")}
      </p>
    </div>
    <ContactSection lang={lang} />
  </section>

  <script src="@glidejs/glide/dist/glide.min.js"></script>

  <script>
    import KeenSlider from "keen-slider";
    ["astro:page-load"].forEach((event) => {
      document.addEventListener(event, () => {
        const slider = new KeenSlider("#carousel", {
          loop: true,
          slides: {
            origin: "center",
            perView: 1.2,
            spacing: 15,
          },
        });
      });
    });
  </script>
  <style>
    .breathing-text {
      animation: breath 8s ease-in-out infinite;
      transform-origin: center;
    }

    @keyframes breath {
      0%,
      100% {
        transform: scale(1);
      }
      30% {
        transform: scale(1.05);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .breathing-text {
        animation: none;
      }
    }
  </style>
</RootLayout>
