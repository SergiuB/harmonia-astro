---
import TestDiv from "../components/TestDiv.astro";
import RootLayout from "../layouts/RootLayout.astro";
const pageTitle = "My Astro site";
---

<RootLayout title={pageTitle}>
  {new Array(100).fill(0).map((_, i) => <TestDiv id={i} client:visible />)}
</RootLayout>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries &&
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.remove("opacity-0", "translate-x-full");
          entry.target.classList.add("opacity-100");
        } else {
          entry.target.classList.remove("opacity-100");
          entry.target.classList.add("opacity-0", "translate-x-full");
        }
      });
  }, {});
  const target = document.querySelectorAll(".item").forEach((el) => {
    observer.observe(el); // start observing our element
  }); // grab your element however you please
</script>
